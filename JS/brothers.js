var DATA = [

        {
              "name": "Qur'an",
              "Nickname": "Nickname: Qrazy Qur'an",
              "From": "From: Richmond",
              "Future": "Future: Video Game Designer",
              "Program": "Why are you in the Program: Wants to make money",
              "Norm": "Community Norm: Respect Mothers",
        },
        {
              "name": "Thai",
              "Nickname": "Nickname: Tall Thai",
              "From": "From: Oakland",
              "Future": "Future: Video Game Designer",
              "Program": "Why are you in the Program: To learn about computers and coding",
              "Norm": "Community Norm: Be there for each other",
        },
        {
              "name": "Legand",
              "Nickname": "Nickname: Living Legand",
              "From": "From: Richmond",
              "Future": "Future: TBD",
              "Program": "Why are you in the Program: To learn programming, leadership, and entrepreneurship",
              "Norm": "Community Norm: No foul language",
        },
        {
              "name": "Josh",
              "Nickname": "Nickname: Joking Josh",
              "From": "From: Berkeley",
              "Future": "Future: Engineer",
              "Program": "Why are you in the Program: Learn about coding",
              "Norm": "Community Norm: Treat others the way you want to be treated",
        },
        {
              "name": "Broaden",
              "Nickname": "Nickname: Big Broaden",
              "From": "From: Richmond",
              "Future": "Future: Barber",
              "Program": "Why are you in the Program: Mom made me come",
              "Norm": "Community Norm: No running",
        },
        {
              "name": "Cam'ron",
              "Nickname": "Nickname: Killer Cam",
              "From": "From: West Oakland",
              "Future": "Future: Video Game Designer",
              "Program": "Why are you in the Program: To learn coding",
              "Norm": "Community Norm: Always be creative",
        },
        {
              "name": "Sonny",
              "Nickname": "Nickname: Super Sonny",
              "From": "From: San Ramon",
              "Future": "Future: Sound Engineer",
              "Program": "Why are you in the Program: To learn about entrepreneurship",
              "Norm": "Community Norm: Keep it comfortable",
        },
        {
              "name": "Aasani",
              "Nickname": "Nickname: Anonymous Aasani",
              "From": "From: Tiburon",
              "Future": "Future: Video Game Designer",
              "Program": "Why are you in the Program: To learn coding",
              "Norm": "Community Norm: Friendliness",
        },
        {
              "name": "Diego",
              "Nickname": "Nickname: Dramatic Diego",
              "From": "From: Berkeley",
              "Future": "Future: Architect",
              "Program": "Why are you in the Program: It is a good opportunity",
              "Norm": "Community Norm: One Mic",
        },
        {
              "name": "Micah",
              "Nickname": "Nickname: Musty Micah",
              "From": "From: Richmond",
              "Future": "Future: Stock Broker",
              "Program": "Why are you in the Program: To learn about entrepreneurship",
              "Norm": "Community Norm: Share the Food",
        },
        {
              "name": "Daniel",
              "Nickname": "Nickname: Dasking Daniel",
              "From": "From: Antioch",
              "Future": "Future: Computer Engineer",
              "Program": "Why are you in the Program: To learn about computers",
              "Norm": "Community Norm: Respect each other",
        },
        {
              "name": "Omari",
              "Nickname": "Nickname: Odd O",
              "From": "From: Hayward",
              "Future": "Future: Coder",
              "Program": "Why are you in the Program: It was presented at school",
              "Norm": "Community Norm: Don't take too long to clean up",
        },
        {
              "name": "Kayden",
              "Nickname": "Nickname: Kool Kayden",
              "From": "From: Oakland",
              "Future": "Future: Computer Engineer",
              "Program": "Why are you in the Program: Has a friend in rich 2",
              "Norm": "Community Norm: Don't be loud",
        },
        {
              "name": "Ju'leyen",
              "Nickname": "Nickname: Jumping Ju'leyen",
              "From": "From: Richmond",
              "Future": "Future: Computer Engineer",
              "Program": "Why are you in the Program: Mom signed me up",
              "Norm": "Community Norm: Responsibility",
        },
        {
              "name": "Ousseynou",
              "Nickname": "Nickname: Obvious Ousseynou",
              "From": "From: West Oakland",
              "Future": "Future: Architect",
              "Program": "Why are you in the Program: Wants to learn more",
              "Norm": "Community Norm: No N-word",
        },
        {
              "name": "Akin",
              "Nickname": "Nickname: Adventurous Akin",
              "From": "From: Hayward",
              "Future": "Future: TBD",
              "Program": "Why are you in the Program: Mom told him to",
              "Norm": "Community Norm: Don't touch personal belongings",
        },
        {
              "name": "Okona",
              "Nickname": "Nickname: Outstanding Okona",
              "From": "From: Albany",
              "Future": "Future: Video Game Designer",
              "Program": "Why are you in the Program: To learn about computer science",
              "Norm": "Community Norm: Respect opinions",
        },
        {
              "name": "Jalil",
              "Nickname": "Nickname: Juice Jalil",
              "From": "From: Oakland",
              "Future": "Future: Video Game Designer",
              "Program": "Why are you in the Program: To learn about computer science",
              "Norm": "Community Norm: Don't go on innappropiate websites",
        },
        {
              "name": "Mehki",
              "Nickname": "Nickname: Mysterious Mehki",
              "From": "From: Vallejo",
              "Future": "Future: Video Game Designer",
              "Program": "Why are you in the Program: To learn coding",
              "Norm": "Community Norm: No put down",
        },
        {
              "name": "Marlon",
              "Nickname": "Nickname: Mad Marlon",
              "From": "From: Vallejo",
              "Future": "Future: Basketball player",
              "Program": "Why are you in the Program: To learn about leadership",
              "Norm": "Community Norm: Personal Space",
        },
        {
              "name": "Kenneth",
              "Nickname": "Nickname: Karnage Kenneth",
              "From": "From: Richmond",
              "Future": "Future: Video Game Designer",
              "Program": "Why are you in the Program: To learn about computer science",
              "Norm": "Community Norm: Respect",
        },
        {
              "name": "Andre",
              "Nickname": "Nickname: Awesome Andre",
              "From": "From: Richmond",
              "Future": "Future: Fashion Designer",
              "Program": "Why are you in the Program: To learn how to code",
              "Norm": "Community Norm: No fighting",
        },
        {
              "name": "Dawit",
              "Nickname": "Nickname: Danger D",
              "From": "From: Richmond",
              "Future": "Future: Engineer",
              "Program": "Why are you in the Program: Had friends inside in rich 2",
              "Norm": "Community Norm: Don't be late",
        },


  ];

$(function() {
  var loadedData = false,
      $goGlossary = $('.go-glossary'),
  		$wrapper = $('.wrapper'),
      source = $('#glossary-template').html(),
      template = Handlebars.compile(source),
      $termsList = $('.glossary-terms'),
      $search = $('input[type=search]'),
      terms;

  // After each key stroke compare the search box query against the name and description of each term
  $search.on('keyup input propertychange paste', function() {
    var filtered = filterTerms(terms);
    // Recompile the template with the filtered,alphebetized terms list
    compileTemplate(filtered);
  });

  function loadData(filter) {
    $termsList.empty().append('<li>Loading terms...</li>');
  	// jQuery.getJSON('js/data.js', function(data) {
      terms = DATA;
      if (filter) DATA = filterTerms(terms);
      compileTemplate(DATA);
      loadedData = true;
    // });
  }

  function filterTerms(data) {
    var query = $search.val().toLowerCase();
    return $.grep(data, function(obj) {
      return (obj.name.toLowerCase().indexOf(query) >= 0 ||obj.Nickname.toString().toLowerCase().indexOf(query) >= 0|| obj.From.toLowerCase().indexOf(query) >= 0 ||obj.Program.toLowerCase().indexOf(query) >= 0 ||obj.Norm.toLowerCase().indexOf(query) >= 0);
    });
  }

  function compileTemplate(data) {
    data.sort(compare);
    $termsList.empty().append( template({ 'terms': data }) );
    registerTagHandler();
  }

  // change search term when user clicks a tag
  function registerTagHandler() {
    var $tag = $('.tag');
    $tag.on('click', function() {
      $search.val($(this).text());

      var filtered = filterTerms(terms);
      compileTemplate(filtered);
    });
  }

  //filter function for ordering glossary terms
  function compare(a,b) {
    if (a.name < b.name)
       return -1;
    if (a.name > b.name)
      return 1;
    return 0;
  }

  $( document ).ready(function() {
    if (!loadedData) loadData();
    $wrapper.addClass('show-glossary');
  });

  // $('.toggle-glossary').click(function() {
  //   if (!loadedData) loadData();
  //   $wrapper.addClass('show-glossary');
  // });
  // $('.toggle-home').click(function() {
  //   $('.wrapper').removeClass('show-glossary');
  // });

  $goGlossary.on('click', function() {
    $search.val($(this).text());
    if (!loadedData) {
      loadData($(this).text());
    } else {
      var filtered = filterTerms(terms);
      compileTemplate(filtered);
    }
    $wrapper.toggleClass('show-glossary');
  });

  // Shake the button to grab attention for the demo
  setTimeout(function () {
    var $glossary = $('.toggle-glossary');

    $glossary.addClass('shake');
    $glossary.one('webkitAnimationEnd oanimationend msAnimationEnd animationend', function (e) {
      $glossary.removeClass('shake');
    });
  }, 3000);
});
